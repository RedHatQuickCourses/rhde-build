:time_estimate: 5

= Lab: Install Image Builder on a Development VM

_Estimated reading time: *{time_estimate} minutes*._

Objective::

Install and configure Image Builder in a RHEL VM for creating edge images.

== Before you Begin

You need a RHEL machine with either the root password or unrestricted sudo, and also access to Red Hat Enterprise Linux package repositories, to install any missing packages. That machine must have plenty of disk space to store multiple OSTree commits and also for scratch space for downloading RPM packages and bootable device images.

These instructions were tested on RHEL 9.4 [tentative!] but should work with minimal or no change on and newer and older RHEL 9.x releases.

== Instructions

1. Install the packages for the Image Buider service and its clients.

.. Install the RPM packages for the ImageBuilder service and its CLI.

.. Install the RPM packages for the Cockpit service and the Composer modue.

2. Enable the Image Builder and Cockpit services.

.. Enable and activiate the Image Builder service.

.. Enable and activiate the Cockpit service.

.. Enable remote access to the Cockpit service.

3. Grant an unprivilaged user access to Image Builder.

.. Add the `student` user to the `weldr` group

.. Verify that the `student` user can use the Image Builder CLI.

4. Verify that an unprivileged user can access Image Builder from Cockpit

.. Open a web browser and go to https://127.0.0.1:9090. Accept the insecure TLS certificate, if you need.

.. Click `Image Builder`

5. Configure Image Builder to access package repositories from the local network.

.. Create a source for the RHEL 9 baseos channel name.

.. Create a source for the RHEL 9 appstream channel.

// Is there anything more substantial we could do to prove the clients can indeed submit requests to the Image Builder service? Before we actually create a blueprint and a compose?

== Next Steps

The next activity creates and validates a blueprint for an edge device.
